{
    "os_id":["ubuntu","debian"],
    "application_list":[
        {
            "id":"openssh",
            "name":"openssh",
            "required":true,
            "ports":[22],
            "install_commands":["ARG DEBIAN_FRONTEND=noninteractive",
                                "ENV TZ=Etc/UTC",
                                "RUN apt install openssh-server -y --force-yes",
                                "RUN useradd -rm -d /home/ubuntu -s /bin/bash -g root -G sudo test",
                                "RUN echo \"test:test\" | chpasswd",
                                "RUN service ssh start"],
            "run_commands":["/usr/sbin/sshd -D"]
        },
        {
            "id":"apache2",
            "name":"apache2",
            "required":false,
            "ports":[80],
            "install_commands":["RUN apt install apache2 -y --force-yes",
                                "RUN apt install apache2-utils -y --force-yes"],
            "run_commands":["apache2ctl -D FOREGROUND"]
        },
        {
            "id":"nginx",
            "name":"nginx",
            "required":false,
            "ports":[80],
            "install_commands":["RUN apt install nginx -y --force-yes"],
            "run_commands":["service nginx start"]
        },
        {
            "id":"vsftpd",
            "name":"vsftpd",
            "required":false,
            "ports":[20,21],
            "install_commands":["RUN apt install vsftpd -y --force-yes",
                                "RUN useradd -m testuser",
                                "RUN echo \"testuser:testuser\" | chpasswd"],
            "run_commands":["/usr/sbin/vsftpd"]
        },
        {
            "id":"postgresql",
            "name":"postgresql",
            "required":false,
            "ports":[5432],
            "install_commands":["ARG DEBIAN_FRONTEND=noninteractive",
                                "ENV TZ=Etc/UTC",
                                "RUN apt install postgresql postgresql-contrib -y --force-yes",
                                "RUN cd /etc/postgresql/*; echo \"listen_addresses = '*'\" >> main/postgresql.conf",
                                "RUN cd /etc/postgresql/*; echo \"# TYPE DATABASE USER ADDRESS METHOD\" >> main/pg_hba.conf",
                                "RUN cd /etc/postgresql/*; echo \"host all all 0.0.0.0/0 md5\" >> main/pg_hba.conf",
                                "RUN cd /etc/postgresql/*; echo \"host all all ::/0 md5\" >> main/pg_hba.conf"],
            "run_commands":["service postgresql start"]
        },
        {
            "id":"mariadb",
            "name":"mariadb",
            "required":false,
            "ports":[3306],
            "install_commands":["RUN apt install mariadb-server -y --force-yes",
                                "RUN sed -i \"s/# port =/port =/\" /etc/mysql/my.cnf",
                                "RUN sed -i \"s/socket =/# socket =/\" /etc/mysql/my.cnf",
                                "RUN sed -i \"s/# port =/port =/\" /etc/mysql/mariadb.cnf",
                                "RUN sed -i \"s/socket =/# socket =/\" /etc/mysql/mariadb.cnf",
                                "RUN sed -i \"s/127.0.0.1/0.0.0.0/\" /etc/mysql/mariadb.conf.d/50-server.cnf; exit 0",
                                "RUN echo \"skip-networking=0\" >> /etc/mysql/conf.d/mysql.cnf",
                                "RUN echo \"skip-bind-address\" >> /etc/mysql/conf.d/mysql.cnf"],
            "run_commands":["service mariadb start"]
        },
        {
            "id":"firefox",
            "name":"firefox browser",
            "required":false,
            "ports":[],
            "install_commands":["RUN apt install firefox -y --force-yes; exit 0"],
            "run_commands":["firefox --headless"]
        },
        {
            "id":"postfix",
            "name":"postfix",
            "required":false,
            "ports":[25],
            "install_commands":["ARG DEBIAN_FRONTEND=noninteractive",
                                "RUN apt install postfix -y --force-yes; exit 0"],
            "run_commands":["postfix start"]
        },
        {
            "id":"mysql",
            "name":"mysql",
            "required":false,
            "ports":[3306],
            "install_commands":["ARG DEBIAN_FRONTEND=noninteractive",
                                "RUN apt install mysql-server -y --force-yes; exit 0"],
            "run_commands":["service mysql start"]
        },
        {
            "id":"rabbitmq",
            "name":"rabbitmq",
            "required":false,
            "ports":[5672,15672],
            "install_commands":["ARG DEBIAN_FRONTEND=noninteractive",
                                "RUN curl -s https://packagecloud.io/install/repositories/rabbitmq/rabbitmq-server/script.deb.sh | bash",
                                "RUN apt install rabbitmq-server -y --force-yes; exit 0",
                                "RUN service rabbitmq-server start; exit 0",
                                "RUN rabbitmq-plugins enable rabbitmq_management; exit 0"],
            "run_commands":["service rabbitmq-server start","rabbitmq-plugins enable rabbitmq_management"]
        },
        {
            "id":"php",
            "name":"php",
            "required":false,
            "ports":[],
            "install_commands":["ARG DEBIAN_FRONTEND=noninteractive",
                                "RUN apt install php -y --force-yes; exit 0"],
            "run_commands":["php -v"]
        },
        {
            "id":"python",
            "name":"python",
            "required":false,
            "ports":[],
            "install_commands":["ARG DEBIAN_FRONTEND=noninteractive",
                                "RUN apt install python -y --force-yes; exit 0"],
            "run_commands":["python -m SimpleHTTPServer 8088","python -m http.server 8088 --bind 0.0.0.0"]
        },
        {
            "id":"java",
            "name":"java",
            "required":false,
            "ports":[],
            "install_commands":["ARG DEBIAN_FRONTEND=noninteractive",
                                "RUN apt install default-jre -y --force-yes; exit 0",
                                "RUN apt install default-jdk -y --force-yes; exit 0"],
            "run_commands":["java -v"]
        },
        {
            "id":"nodejs",
            "name":"nodejs",
            "required":false,
            "ports":[],
            "install_commands":["ARG DEBIAN_FRONTEND=noninteractive",
                                "RUN apt install nodejs -y --force-yes",
                                "RUN apt install npm -y --force-yes"],
            "run_commands":["nodejs -v"]
        },
        {
            "id":"procmail",
            "name":"procmail",
            "required":false,
            "ports":[],
            "install_commands":["ARG DEBIAN_FRONTEND=noninteractive",
                                "RUN apt install procmail -y --force-yes"],
            "run_commands":["procmail -v"]
        },
        {
            "id":"ruby",
            "name":"ruby",
            "required":false,
            "ports":[],
            "install_commands":["ARG DEBIAN_FRONTEND=noninteractive",
                                "RUN apt install ruby -y --force-yes; exit 0",
                                "RUN apt install ruby-full -y --force-yes; exit 0"],
            "run_commands":["ruby --version"]
        },
        {
            "id":"samba",
            "name":"samba",
            "required":false,
            "ports":[5559],
            "install_commands":["ARG DEBIAN_FRONTEND=noninteractive",
                                "RUN apt install samba -y --force-yes",
                                "RUN echo '[sambashare]' >> /etc/samba/smb.conf",
                                "RUN echo 'comment = Samba on Ubuntu' >> /etc/samba/smb.conf",
                                "RUN echo 'path = /' >> /etc/samba/smb.conf",
                                "RUN echo 'read only = no' >> /etc/samba/smb.conf",
                                "RUN echo 'browsable = yes' >> /etc/samba/smb.conf"],
            "run_commands":["service smbd start"]
        },
        {
            "id":"thunderbird",
            "name":"thunderbird",
            "required":false,
            "ports":[],
            "install_commands":["ARG DEBIAN_FRONTEND=noninteractive",
                                "RUN apt install thunderbird -y --force-yes"],
            "run_commands":["thunderbird -v"]
        },
        {
            "id":"mongo",
            "name":"mongo",
            "required":false,
            "ports":[27017],
            "install_commands":["ARG DEBIAN_FRONTEND=noninteractive",
                                "RUN apt install curl -y --force-yes",
                                "RUN apt install gnupg -y --force-yes",
                                "RUN curl -fsSL https://www.mongodb.org/static/pgp/server-2.2.asc | apt-key add -",
                                "RUN echo 'deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu RELEASE/mongodb-org/4.4 multiverse' | tee /etc/apt/sources.list.d/mongodb-org-2.2.list",
                                "RUN apt update; exit 0",
                                "RUN apt install mongodb -y --force-yes; exit 0"],
            "run_commands":["service mongodb start"]
        },
        {
            "id":"squirrelmail",
            "name":"squirrelmail",
            "required":false,
            "ports":[],
            "install_commands":["ARG DEBIAN_FRONTEND=noninteractive",
                                "RUN apt install squirrelmail -y --force-yes; exit 0"],
            "run_commands":["squirrelmail -v"]
        },
        {
            "id":"chroumium",
            "name":"chromium",
            "required":false,
            "ports":[],
            "install_commands":["ARG DEBIAN_FRONTEND=noninteractive",
                                "RUN apt install chroumium-browser -y --force-yes; exit 0"],
            "run_commands":["chromium-browser -v"]
        }
        
    ]
}